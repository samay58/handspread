{"id":"hs-050","title":"Test: Airlines / operating leases (DAL, UAL, AAL, LUV, JBLU)","description":"Airlines have massive operating leases for aircraft. AAL has negative stockholders_equity. Cyclical earnings with COVID recovery distortion. Verify: run with EVPolicy(include_leases=True). Operating lease liabilities should add 30-50%+ to EV for airlines. Compare EV with and without leases. AAL should trigger negative equity handling. Growth rates may show COVID recovery distortion (extreme YoY from depressed base).","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:34.176147-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:34.176147-08:00"}
{"id":"hs-17w","title":"Price = 0 from Finnhub produces nonsense market cap","description":"Finnhub returns c: 0 for delisted/invalid tickers. This flows through as market_cap = 0, which gives nonsensical multiples. Location: finnhub_client.py:95","status":"closed","priority":1,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:31.61375-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.694647-08:00","closed_at":"2026-02-16T21:19:22.694647-08:00","close_reason":"Closed"}
{"id":"hs-20n","title":"Test: Oil \u0026 gas cyclical (XOM, CVX, COP, SLB, OXY)","description":"Oil companies with commodity-driven earnings. High capex (30%+ of revenue). OXY has very high debt from Anadarko acquisition. Verify: capex_pct_revenue is high (20-40%). EV bridge captures large debt correctly. Growth may show volatility from commodity price swings. EBITDA multiples should be reasonable (5-8x for majors). OXY debt should be substantial in EV bridge.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:39.418532-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:39.418532-08:00"}
{"id":"hs-2jq","title":"edgarpack derived metrics don't support series periods","description":"Root cause of growth DerivedValue crash. edgarpack _compute_derived() ignores period selectors, always returns single DerivedValue for derived metrics. Should return list[DerivedValue] for annual:N queries. Location: edgarpack/query/financials.py:148-151 and 174-192. This is an edgarpack issue tracked here for cross-reference.","status":"open","priority":2,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:41.91052-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:37:41.91052-08:00"}
{"id":"hs-3l4","title":"Test: Pre-revenue / deep losses (RIVN, LCID, IONQ, DNA)","description":"Companies with near-zero revenue or massive losses. Tests zero/near-zero denominators. RIVN and LCID have some revenue but massive net losses. IONQ minimal revenue. DNA (Ginkgo Bioworks) minimal revenue. Verify: EV/Revenue may be extremely high but not None. P/E should be negative (negative net income warning). Growth rates may be extreme. No crashes from zero-value metrics. revenue_per_share extremely low.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:22.295954-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:30.557622-08:00","closed_at":"2026-02-16T21:19:30.557622-08:00","close_reason":"Closed"}
{"id":"hs-4en","title":"Test: Banks / financials (JPM, GS, BAC, WFC, MS)","description":"Financial companies have fundamentally different metrics. Revenue for banks = net interest income + non-interest income, tagged differently in XBRL. EBITDA is meaningless for banks. EV is usually not used for banks. Verify: revenue concept resolves to something (may be Revenues or RevenueFromContractWithCustomerExcludingAssessedTax). Check which metrics come back None. Expect many None multiples. Document which metrics are meaningful for financials vs not.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:11.451816-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.716004-08:00","closed_at":"2026-02-16T21:19:22.716004-08:00","close_reason":"Closed"}
{"id":"hs-4h6","title":"Add SBC add-back for adjusted EBITDA","description":"GAAP EBITDA (operating income + D\u0026A) is meaningless for SaaS companies because stock-based compensation is 20-40% of revenue and treated as an operating expense. DDOG shows 3789x EV/EBITDA which is useless. Fix: pull SBC from SEC XBRL (us-gaap:ShareBasedCompensation or equivalent concept), add it back to compute adjusted EBITDA = operating income + D\u0026A + SBC. Also consider restructuring charges add-back. Display both GAAP and adjusted EBITDA in output. Adjusted EBITDA is the standard metric for SaaS comp tables.","status":"closed","priority":1,"issue_type":"feature","owner":"samay58@gmail.com","created_at":"2026-02-16T21:08:45.629901-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:27:51.775329-08:00","closed_at":"2026-02-16T21:27:51.775329-08:00","close_reason":"LTM growth: replaced annual:2 with ltm-1, rewrote growth.py. Adjusted EBITDA: added SBC concept to edgarpack, compute OI+DA+SBC in multiples.py, ev_ebitda now uses adjusted."}
{"id":"hs-7c1","title":"Test: Foreign ADR multi-currency stress (TSM, ASML, SAP, TM, NVO, SONY)","description":"Six companies reporting in different currencies: TSM (TWD), ASML (EUR), SAP (EUR), TM (JPY), NVO (DKK), SONY (JPY). Primary test for currency mismatch handling. Verify: all get None EV with currency warning. Growth and operating pct-of-revenue metrics should still work (same-currency ratios). Equity multiples (P/E, price_book) should ALSO be None once currency fix is extended beyond EV bridge. Revenue_per_share unit should flag currency mismatch.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:05.442865-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:30.559533-08:00","closed_at":"2026-02-16T21:19:30.559533-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-7c1","depends_on_id":"hs-hgv","type":"blocks","created_at":"2026-02-16T02:57:39.628245-08:00","created_by":"Samay Dhawan"}]}
{"id":"hs-8mx","title":"ROIC breaks on negative invested capital","description":"If total_debt + equity is negative (distressed companies), ROIC calculation produces a meaningless number. Currently only checks \u003e 0. Location: operating.py:74","status":"open","priority":2,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:38.288546-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:37:38.288546-08:00"}
{"id":"hs-9wv","title":"Test: Single ticker edge cases (BRK.A, ZZZZZ, TCEHY)","description":"Three edge cases run individually: (1) BRK.A: share price of 600K+ USD, tests extreme price values in formatting and market_cap computation. (2) ZZZZZ: completely invalid ticker, should fail gracefully with descriptive errors, no crashes. (3) TCEHY: Tencent OTC ADR, may not be in SEC EDGAR or Finnhub, tests partial data failure. Run each as analyze_comps([ticker]) individually. Verify graceful handling.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:47.41778-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:47.41778-08:00"}
{"id":"hs-c7v","title":"Test: Biotech / R\u0026D intensity (LLY, MRNA, REGN, VRTX, BIIB)","description":"Biotech with extreme R\u0026D spending. MRNA went from massive COVID profits to revenue collapse, so growth will be extremely negative. LLY has surged in value from GLP-1 drugs. High R\u0026D as pct of revenue (20-40%+). Verify: rd_pct_revenue is high and computed correctly. MRNA revenue_yoy should be large negative. No crash from extreme growth percentages. Operating metrics populate for pharma XBRL concepts.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:43.38077-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:43.38077-08:00"}
{"id":"hs-d97","title":"None values in growth series cause crash","description":"If a CitedValue in the series has value=None, _yoy_growth handles it, but if the series itself contains None entries mixed with CitedValues, indexing could break. Location: growth.py:24-25","status":"closed","priority":1,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:35.387351-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.755611-08:00","closed_at":"2026-02-16T21:19:22.755611-08:00","close_reason":"Closed"}
{"id":"hs-fsu","title":"Test: Negative equity buyback kings (SBUX, MCD, BA, HLT)","description":"Companies with negative stockholders_equity from massive share buybacks. SBUX negative equity since 2018. MCD similar. BA negative from 737 MAX + buybacks, massive debt. HLT capital-light model. Verify: price_book has negative-denominator warning. ROIC skipped when invested_capital \u003c= 0. EV bridge handles huge debt correctly. No crashes from negative equity flowing through formulas.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:15.246916-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.705282-08:00","closed_at":"2026-02-16T21:19:22.705282-08:00","close_reason":"Closed"}
{"id":"hs-g9a","title":"Add cross-validation layer to flag data freshness issues","description":"Smoke test revealed revenue discrepancies of 6-15% for companies where SEC filings lag earnings releases (DDOG -6.3%, NOW -4.6%, CRWD +15.0%). Handspread uses most recent filed 10-Q for LTM, but 10-Q filing lags earnings press releases by 30-40 days. Fix: add optional yfinance cross-validation that flags when handspread revenue differs from yfinance TTM by more than 5%. Include a data_freshness field in CompanyAnalysis showing the as-of date of the SEC data vs current date. This is a verification feature, not a data source change â€” handspread stays SEC-sourced with provenance.","status":"open","priority":2,"issue_type":"feature","owner":"samay58@gmail.com","created_at":"2026-02-16T21:08:51.54497-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:08:51.54497-08:00"}
{"id":"hs-gyi","title":"Test: Delisted / acquired tickers (ATVI, VMW, LNKD, FIT)","description":"Companies acquired and delisted. ATVI acquired by MSFT (2023). VMW acquired by AVGO (2023). LNKD acquired by MSFT (2016). FIT acquired by GOOG (2021). Finnhub should return None or 0 for price. Tests hs-17w (price=0 bug) and graceful failure of market data. Verify: no crashes. Market data returns None or produces warnings. SEC data may still exist from historical filings. Check error messages are descriptive.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:31.193156-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:31.193156-08:00"}
{"id":"hs-hgv","title":"Currency mismatch corrupts equity multiples, not just EV","description":"The hs-xr8 fix catches currency mismatch in the EV bridge, but equity-based multiples are also wrong for foreign filers. P/E = USD market cap / JPY net_income = nonsense. Same for price_book (USD/JPY), fcf_yield (JPY/USD), dividend_yield (JPY/USD), and revenue_per_share (labeled USD/shares but actually JPY/shares). Fix: add currency check in compute_multiples() and compute_operating() similar to the EV bridge check. Return None with warning for any metric that crosses USD and non-USD values. Files: handspread/analysis/multiples.py, handspread/analysis/operating.py","status":"closed","priority":0,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:42:57.056744-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:15.942425-08:00","closed_at":"2026-02-16T21:19:15.942425-08:00","close_reason":"Closed"}
{"id":"hs-i35","title":"Test: Chinese ADRs / CNY currency (BABA, PDD, JD, BIDU, NIO)","description":"Chinese ADRs with VIE structures. Most report in CNY/RMB. BABA, PDD, JD, NIO all file in CNY. BIDU may file in CNY or USD. Tests currency mismatch handling for CNY specifically. Verify: all CNY reporters get None EV with currency warning. Check if any Chinese ADR files in USD (would be interesting to see which resolve correctly). Same currency issues as the broader ADR test but specifically for the CNY cluster.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:27.169223-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:30.565284-08:00","closed_at":"2026-02-16T21:19:30.565284-08:00","close_reason":"Closed","dependencies":[{"issue_id":"hs-i35","depends_on_id":"hs-hgv","type":"blocks","created_at":"2026-02-16T02:57:39.681886-08:00","created_by":"Samay Dhawan"}]}
{"id":"hs-jzg","title":"Test: Large comp set rate limiting (15+ tickers)","description":"Run analyze_comps with 15+ tickers to test SEC rate limiting, Finnhub concurrency semaphore, and timeout handling. Use: AAPL, MSFT, GOOG, AMZN, META, NVDA, NFLX, DIS, CMCSA, JPM, GS, BAC, XOM, CVX, JNJ, PFE, MCD. Verify: all 17 return results (no timeouts on 60s default). Check that SEC rate limiter at 10 req/s is respected. Finnhub semaphore handles concurrent requests. Total wall time is reasonable (under 60s). No partial failures from throttling.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:51.884084-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:51.884084-08:00"}
{"id":"hs-l81","title":"Compute LTM growth from LTM vs LTM-1 instead of annual vs annual","description":"Current growth computation compares the two most recent annual filings. This produces misleading numbers for companies where growth is decelerating (PD shows 31.8% annual vs 4.7% TTM). Analysts want LTM-based growth. Fix: compute LTM-1 by pulling the prior-year equivalent quarterly data from edgarpack (requires edgarpack to support LTM-1 periods), then compute growth as (LTM_revenue - LTM1_revenue) / LTM1_revenue. Depends on edgarpack supporting a prior-year LTM query.","status":"closed","priority":1,"issue_type":"feature","owner":"samay58@gmail.com","created_at":"2026-02-16T21:08:40.973032-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:27:51.770578-08:00","closed_at":"2026-02-16T21:27:51.770578-08:00","close_reason":"LTM growth: replaced annual:2 with ltm-1, rewrote growth.py. Adjusted EBITDA: added SBC concept to edgarpack, compute OI+DA+SBC in multiples.py, ev_ebitda now uses adjusted."}
{"id":"hs-nxf","title":"Growth crashes on DerivedValue from edgarpack","description":"growth.py:18 calls len(series) but edgarpack returns single DerivedValue (not list) for derived metrics like ebitda with period=annual:2. Fix: guard against non-list values in compute_growth(). Also remove ebitda and eps_diluted from GROWTH_METRICS in engine.py since they are derived metrics. Files: handspread/analysis/growth.py, handspread/engine.py","status":"closed","priority":0,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:25.774458-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:39:41.69965-08:00","closed_at":"2026-02-16T02:39:41.69965-08:00","close_reason":"Closed"}
{"id":"hs-rkt","title":"Test: Duplicate tickers, empty list, and EV policy variations","description":"Three sub-tests: (1) Duplicate tickers: analyze_comps(['AAPL', 'AAPL']) - does it dedup or double-process? Check for cache hits. (2) Empty list: analyze_comps([]) - tests hs-y44. (3) EV policy matrix: run AAPL through 4 policies: default, include_leases=True, debt_mode=split, subtract_equity_method_investments=True. Compare EV values across policies. Verify each policy path produces different but valid EV, and warnings/formulas reflect the policy used.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:56.069892-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:56.069892-08:00"}
{"id":"hs-s6o","title":"Test: REITs (AMT, PLD, SPG, O, EQIX)","description":"REITs have unique accounting. P/E less meaningful (industry uses Price/FFO which we dont compute). Massive operating lease liabilities. Depreciation is huge, inflating EBITDA. High debt/equity ratios are normal. Verify: EV bridge with include_leases=True adds substantial operating_lease_liabilities. EBITDA multiples exist but may be misleading. Document what percentage of metrics populate. Good test for the operating lease path in EV bridge.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:18.679791-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:30.560471-08:00","closed_at":"2026-02-16T21:19:30.560471-08:00","close_reason":"Closed"}
{"id":"hs-tkp","title":"Test: Scale mix mega-cap + small-cap (AAPL, MSFT, CROX, DBI)","description":"Mix companies with 6+ orders of magnitude difference in market cap. AAPL ~3T, MSFT ~3T, CROX ~5B, DBI (Designer Brands) ~400M. Tests that the analysis handles extreme scale differences in the same comp set without overflow, formatting issues, or ratio distortions. Verify: all four produce valid analyses. EV/Revenue multiples are comparable despite scale differences. No floating-point precision issues in very large or very small numbers.","status":"open","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:35.153582-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:43:35.153582-08:00"}
{"id":"hs-xr8","title":"Currency mismatch produces nonsense EV for non-USD filers","description":"Sony reports in JPY. SEC CitedValue.unit = JPY, Finnhub market cap in USD. EV bridge adds JPY debt (~4T JPY) to USD market cap, producing -3.7T EV. Fix: detect currency from SEC unit field in build_ev_bridge(). If non-USD, return None EV with warning. File: handspread/analysis/enterprise_value.py","status":"closed","priority":0,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:21.968454-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T02:39:41.698324-08:00","closed_at":"2026-02-16T02:39:41.698324-08:00","close_reason":"Closed"}
{"id":"hs-y44","title":"Empty ticker list silently returns empty","description":"analyze_comps([]) returns [] with no warning. Should validate input and warn or raise. Location: engine.py:57","status":"closed","priority":1,"issue_type":"bug","owner":"samay58@gmail.com","created_at":"2026-02-16T02:37:28.577823-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.700701-08:00","closed_at":"2026-02-16T21:19:22.700701-08:00","close_reason":"Closed"}
{"id":"hs-zyw","title":"Test: Conglomerates / complex structures (BRK.B, MMM, JNJ, RTX)","description":"BRK.B is the really interesting one: massive equity method investments, insurance float as liability thats economically an asset, enormous marketable securities portfolio. EV adjustments for equity_method_investments and marketable_securities could be huge. JNJ recently spun off Kenvue (data may straddle the split). RTX merger of Raytheon + UTC. Verify: BRK.B EV bridge subtracts equity_method_investments and marketable_securities correctly with subtract_equity_method_investments=True policy. Check if values are reasonable.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:29.909737-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:30.616873-08:00","closed_at":"2026-02-16T21:19:30.616873-08:00","close_reason":"Closed"}
{"id":"hs-zzu","title":"Test: Big Tech baseline (AAPL, MSFT, GOOG, AMZN, META, NVDA)","description":"Golden path test. If this breaks, everything is broken. Run analyze_comps with all six tickers. AAPL has negative stockholders_equity from buybacks (price_book will be negative, ROIC invested_capital is edge case). GOOG has dual-class shares (GOOG vs GOOGL may report different shares outstanding). Verify: all EV bridges populated, all multiples computed, growth for revenue and net_income, operating metrics present. Check AAPL price_book has negative-denominator warning.","status":"closed","priority":1,"issue_type":"task","owner":"samay58@gmail.com","created_at":"2026-02-16T02:43:01.362088-08:00","created_by":"Samay Dhawan","updated_at":"2026-02-16T21:19:22.691959-08:00","closed_at":"2026-02-16T21:19:22.691959-08:00","close_reason":"Closed"}
